<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartTrace | Forensic Audit</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/detail_styles.css') }}" />
    <link
      rel="icon"
      href="{{ url_for('static', filename='assets/SmartTraceRetrieval.png') }}"
      type="image/png"
    />
  </head>

  <body>
    <header class="app-header-slim">
      <div class="header-wrapper">
        <div class="nav-brand">
          <a href="/" class="back-button-luxury" aria-label="Back to search">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <line x1="19" y1="12" x2="5" y2="12" />
              <polyline points="12 19 5 12 12 5" />
            </svg>
            <span>Back</span>
          </a>

          <div class="logo-icon-small">
            <img src="{{ url_for('static', filename='assets/SmartTraceRetrieval.png') }}" alt="Logo" />
          </div>
        </div>
        <h1>Forensic Audit - <span id="headerId">ID</span></h1>
      </div>
    </header>

    <div class="detail-grid-layout">
      <aside class="sidebar-fixed">
        <div class="track-box">
          <div class="img-scale-wrapper-detail">
            <img id="targetImg" src="" class="track-img" alt="Target" onerror="this.style.display='none'"/>
          </div>

          <div class="confidence-bar">
            <span>Confidence</span>
            <span id="targetConf" class="conf-value">0%</span>
          </div>
        </div>

        <div class="info-block">
          <span class="info-label">Global ID</span>
          <div class="info-text" id="displayId">-</div>
        </div>

        <div class="summary-box">
          <div class="summary-value" id="nodeCount">00</div>
          <span class="info-label">Nodes Detected</span>
        </div>

        <div class="stats-table-container" style="margin-top: 20px;">
             <h4 class="section-title" style="margin-bottom: 10px; font-size: 0.8rem;">APPEARANCE HISTORY</h4>
             <table class="stats-table" style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
                 <thead>
                     <tr style="background: #f1f5f9; text-align: left;">
                         <th style="padding: 8px; border-bottom: 2px solid #e2e8f0;">Sequence</th>
                         <th style="padding: 8px; border-bottom: 2px solid #e2e8f0;">Cameras</th>
                     </tr>
                 </thead>
                 <tbody id="statsTableBody">
                     </tbody>
             </table>
        </div>
      </aside>

      <main class="detail-scrollable">

        <section class="forensic-section">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
              <h3 class="section-title" style="margin: 0;">SURVEILLANCE FILTER</h3>
          </div>

          <div class="filter-bar">
            <div class="filter-group">
                <label>Select Sequence:</label>
                <select id="seqSelect" class="filter-select">
                    <option value="all">All Sequences</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Select Camera:</label>
                <select id="camSelect" class="filter-select" disabled>
                    <option value="all">All Cameras</option>
                </select>
            </div>
          </div>
        </section>

        <section class="forensic-section">
          <h3 class="section-title">SURVEILLANCE NODE GRID</h3>
          <div class="cctv-grid-pro" id="cctvGrid">
             </div>
        </section>
      </main>
    </div>

    <div id="videoModal" class="modal-overlay" style="display: none">
      <div class="modal-box">
        <button class="modal-close" id="closeModal" aria-label="Close">✕</button>
        <div class="modal-header">
          <h2 id="modalNodeTitle">NODE PREVIEW</h2>
        </div>
        <video id="modalVideoPlayer" controls playsinline width="100%"></video>
      </div>
    </div>

    <footer class="app-footer">
      <div class="footer-content">
        <div class="footer-logo">
          <strong>SmartTrace</strong>
        </div>
        <div class="footer-legal">© SYSTEM INTELLIGENCE</div>
      </div>
    </footer>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  </body>
</html>