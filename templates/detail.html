<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartTrace | Forensic Audit</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/detail_styles.css') }}" />
    <link
      rel="icon"
      href="{{ url_for('static', filename='assets/SmartTraceRetrieval.png') }}"
      type="image/png"
    />
  </head>

  <body>
    <header class="app-header-slim">
      <div class="header-wrapper">
        <div class="nav-brand">
          <a href="/" class="back-button-luxury" aria-label="Back to search">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <line x1="19" y1="12" x2="5" y2="12" />
              <polyline points="12 19 5 12 12 5" />
            </svg>
            <span>Back</span>
          </a>

          <div class="logo-icon-small">
            <img src="{{ url_for('static', filename='assets/SmartTraceRetrieval.png') }}" alt="Logo" />
          </div>
        </div>

        <div class="header-info">
            <span class="header-label">TARGET ID:</span>
            <span class="header-val" id="headerId">LOADING...</span>
        </div>
      </div>
    </header>

    <div class="detail-grid-layout">
      <aside class="sidebar-fixed">
        <div class="track-box">

          <div class="img-scale-wrapper-detail">
             <img id="targetImg" class="track-img" src="" alt="Target Object" onerror="this.style.display='none'">
          </div>

          <div class="confidence-bar">
            <span>CONFIDENCE SCORE</span>
            <span class="conf-value" id="targetConf">--%</span>
          </div>

          <div class="info-block">
            <span class="info-label">Global Identity</span>
            <div class="info-text" id="displayId">--</div>
          </div>

          <div class="summary-box">
             <span class="info-label">Total Sightings</span>
             <div class="summary-value" id="nodeCount">00</div>
          </div>

          <div class="info-block">
            <span class="info-label">Sighting Distribution</span>
            <table class="stats-table">
                <tbody id="statsTableBody">
                    </tbody>
            </table>
          </div>
        </div>
      </aside>

      <main class="detail-scrollable">
        <section class="filter-bar">
          <div class="filter-group">
                <label>Select Sequence:</label>
                <select id="seqSelect" class="filter-select">
                    <option value="all">All Sequences</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Select Camera:</label>
                <select id="camSelect" class="filter-select" disabled>
                    <option value="all">All Cameras</option>
                </select>
            </div>
        </section>

        <section class="forensic-section">
          <h3 class="section-title">SURVEILLANCE NODE GRID</h3>
          <div class="cctv-grid-pro" id="cctvGrid">
             </div>
        </section>
      </main>
    </div>

    <div id="videoModal" class="modal-overlay" style="display: none">
      <div class="modal-box">
        <button class="modal-close" id="closeModal" aria-label="Close">âœ•</button>
        <div class="modal-header">
          <h2 id="modalNodeTitle">NODE PREVIEW</h2>
        </div>
        <video id="modalVideoPlayer" controls playsinline width="100%"></video>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  </body>
</html>